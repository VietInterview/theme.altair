var buildChartDirective=function(chartType){return{restrict:"E",replace:!0,scope:{data:"=",options:"="},link:function(scope,element,attrs){var options={};scope.options&&(options=scope.options);var span=document.createElement("span");span.textContent=scope.data.join(),attrs["class"]?span.className=attrs["class"]:span.className="peity",8===element[0].nodeType?element.replaceWith(span):element[0].appendChild(span),options.height&&element.height(options.height);var chart=jQuery(span).peity(chartType,options);return scope.$watch("data",function(){return chart.text(scope.data).change()})}}};angular.module("angular-peity",[]).directive("peityPieChart",function(){return buildChartDirective("pie")}).directive("peityDonutChart",function(){return buildChartDirective("donut")}).directive("peityBarChart",function(){return buildChartDirective("bar")}).directive("peityLineChart",function(){return buildChartDirective("line")});