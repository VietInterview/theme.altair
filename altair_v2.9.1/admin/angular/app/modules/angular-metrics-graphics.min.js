angular.module("metricsGraphics",[]).directive("metricsGraphics",function($window,$timeout){return{restrict:"A",scope:{data:"=",options:"="},link:function(scope,element){function make_graph(options,el){options.width=el.offsetWidth||"100%",MG.data_graphic(options)}if(scope.data){var options={baselines:[],description:null,right:20,title:null,height:element.height()||240,x_accessor:null,y_accessor:null};scope.options&&Object.keys(scope.options).forEach(function(key){options[key]=scope.options[key]});var el=element[0];options.target="#"+el.id,scope.$watch("data",function(){make_graph(options,el)}),scope.update_chart=function(){$timeout.cancel(scope.resizingTimer),scope.resizingTimer=$timeout(function(){return make_graph(options,el),scope.$apply()},280)},angular.element($window).on("resize",scope.update_chart),scope.$on("$destroy",function(){$(window).off("resize",scope.update_chart)})}}}});