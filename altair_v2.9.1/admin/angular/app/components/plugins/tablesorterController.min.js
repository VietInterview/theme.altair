angular.module("altairApp").controller("tablesorterCtrl",["$scope","$rootScope","$timeout","$compile","variables","ts_data",function($scope,$rootScope,$timeout,$compile,variables,ts_data){$scope.table_data=ts_data,$scope.alignChar_table_data=[["abc 123",".423475","Koala = cute = cudley","search.google.com"],["abc 1","23.4","Ox = stinky","mail.yahoo.com"],["bc 9","1.0","Girafee = tall","http://www.facebook.com"],["zyx 24","7.67","Bison = burger","http://internship.whitehouse.gov/"],["abc 11","3000","Chimp = banana lover","about.ucla.edu"],["abc 2","56.5","Elephant = unforgetable","http://www.wikipedia.org/"],["abc 9","15.5","Lion = rawr","rental.nytimes.com/index.html"],["ABC 10","87.20000","Zebra = stripey","http://android.google.com"],["zyx 1","999.1","Koala = cute, again!","http://irsmrt.mit.edu/"],["zyx 12","0.2","Llama = llove it","http://aliens.nasa.gov/"]],$scope.customFilters_table_data=[["abc 123","10","Koala","Mar 5, 2014"],["abc 1","234","Ox","Jan 2, 2014"],["abc 9","10","Girafee","Sep 20, 2013"],["zyx 24","767","Bison","Apr 8, 2014"],["abc 11","3","Chimp","Feb 5, 2014"],["abc 2","56","Elephant","Dec 18, 2013"],["abc 9","155","Lion","Mar 18, 2014"],["ABC 10","87","Zebra","Jul 1, 2014"],["zyx 1","999","Koala","Jan 18, 2014"],["zyx 12","0","Llama","Jan 20, 2015"]],$scope.$on("onLastRepeat",function(scope,element,attrs){function createPageSelectize(){selectizeObj=$("select.ts_gotoPage").val($("select.ts_gotoPage option:selected").val()).after('<div class="selectize_fix"></div>').selectize({hideSelected:!0,onDropdownOpen:function($dropdown){$dropdown.hide().velocity("slideDown",{duration:200,easing:variables.easing_swiftOut})},onDropdownClose:function($dropdown){$dropdown.show().velocity("slideUp",{duration:200,easing:variables.easing_swiftOut}),$(".uk-tooltip").hide()}})}var $ts_pager_filter=$("#ts_pager_filter"),$ts_align=$("#ts_align"),$ts_customFilters=$("#ts_custom_filters"),$columnSelector=$("#columnSelector");if($(element).closest($ts_pager_filter).length){var pagerOptions={container:$(".ts_pager"),output:"{startRow} - {endRow} / {filteredRows} ({totalRows})",fixedHeight:!0,removeRows:!1,cssGoto:".ts_gotoPage"};$.tablesorter.language.button_print="Print table",$.tablesorter.language.button_close="Cancel",$("#printTable").on("click",function(e){e.preventDefault(),$ts_pager_filter.trigger("printTable")});var ts_users=$ts_pager_filter.tablesorter({theme:"altair",widthFixed:!0,widgets:["zebra","filter","print","columnSelector"],headers:{0:{sorter:!1,parser:!1}},widgetOptions:{columnSelector_container:$columnSelector,columnSelector_name:"data-name",columnSelector_layout:'<li class="padding_md"><input type="checkbox"><label class="inline-label">{name}</label></li>',columnSelector_saveColumns:!1,print_title:"",print_dataAttrib:"data-name",print_rows:"f",print_columns:"s",print_extraCSS:"",print_styleSheet:"",print_now:!0,print_callback:function(config,$table,printStyle){$rootScope.primarySidebarActive=!1,$rootScope.primarySidebarOpen=!1,$timeout(function(){$.tablesorter.printTable.printOutput(config,$table.html(),printStyle)},300)}}}).tablesorterPager(pagerOptions).on("pagerComplete",function(e,filter){"undefined"!=typeof selectizeObj&&selectizeObj.data("selectize")&&(selectizePage=selectizeObj[0].selectize,selectizePage.setValue($("select.ts_gotoPage option:selected").index()+1,!1))});$columnSelector.children("li").each(function(index){var $this=$(this),id=0==index?"auto":index;$this.children("input").attr("id","column_"+id),$this.children("label").attr("for","column_"+id),$this.children("input").prop("checked",!0).iCheck({checkboxClass:"icheckbox_md",radioClass:"iradio_md",increaseArea:"20%"}),0!=index&&$this.find("input").on("ifChanged",function(ev){$(ev.target).toggleClass("checked").change()})}),$("#column_auto").on("ifChecked",function(ev){$(this).closest("li").siblings("li").find("input").iCheck("disable"),$(ev.target).removeClass("checked").change()}).on("ifUnchecked",function(ev){$(this).closest("li").siblings("li").find("input").iCheck("enable"),$(ev.target).addClass("checked").change()}),createPageSelectize(),$(".pagesize.ts_selectize").after('<div class="selectize_fix"></div>').selectize({hideSelected:!0,onDropdownOpen:function($dropdown){$dropdown.hide().velocity("slideDown",{duration:200,easing:variables.easing_swiftOut})},onDropdownClose:function($dropdown){$dropdown.show().velocity("slideUp",{duration:200,easing:variables.easing_swiftOut}),$(".uk-tooltip").hide(),"undefined"!=typeof selectizeObj&&selectizeObj.data("selectize")&&(selectizePage=selectizeObj[0].selectize,selectizePage.destroy(),$(".ts_gotoPage").next(".selectize_fix").remove(),setTimeout(function(){createPageSelectize()}))}}),$(".ts_checkbox_all").iCheck({checkboxClass:"icheckbox_md",radioClass:"iradio_md",increaseArea:"20%"}).on("ifChecked",function(){$ts_pager_filter.find(".ts_checkbox").prop("checked",!0).iCheck("update").closest("tr").addClass("row_highlighted")}).on("ifUnchecked",function(){$ts_pager_filter.find(".ts_checkbox").prop("checked",!1).iCheck("update").closest("tr").removeClass("row_highlighted")}),$ts_pager_filter.find(".ts_checkbox").on("ifUnchecked",function(){$(this).closest("tr").removeClass("row_highlighted"),$(".ts_checkbox_all").prop("checked",!1).iCheck("update")}).on("ifChecked",function(){$(this).closest("tr").addClass("row_highlighted")}),$ts_pager_filter.on("click",".ts_remove_row",function(e){e.preventDefault();var $this=$(this);UIkit.modal.confirm("Are you sure you want to delete this user?",function(){$this.closest("tr").remove(),ts_users.trigger("update")},{labels:{Ok:"Delete"}})})}if($(element).closest($ts_align).length&&$ts_align.tablesorter({theme:"altair",widgets:["zebra","alignChar"],widgetOptions:{alignChar_wrap:"<i/>",alignChar_charAttrib:"data-align-char",alignChar_indexAttrib:"data-align-index",alignChar_adjustAttrib:"data-align-adjust"}}),$(element).closest($ts_customFilters).length){$ts_customFilters.tablesorter({theme:"altair",headerTemplate:"{content} {icon}",widgets:["zebra","filter"],widgetOptions:{filter_reset:"button.ts_cf_reset",filter_cssFilter:["","ts_cf_range","ts_cf_select_single","ts_cf_datepicker"]}}).on("apply.daterangepicker",function(){$table.trigger("search")});var slider=$(".ts_cf_range").ionRangeSlider({min:"0",max:"1000",type:"double","grid-num":"10","from-min":"10","from-max":"30",input_values_separator:" - "}).data("ionRangeSlider"),$selectize=$(".ts_cf_select_single").after('<div class="selectize_fix"></div>').selectize({hideSelected:!0,dropdownParent:"body",closeAfterSelect:!0,onDropdownOpen:function($dropdown){$dropdown.hide().velocity("slideDown",{duration:200,easing:[.4,0,.2,1]})},onDropdownClose:function($dropdown){$dropdown.show().velocity("slideUp",{duration:200,easing:[.4,0,.2,1]})}}),cf_selectize=$selectize[0].selectize,modal=UIkit.modal("#modal_daterange",{center:!0});$(".ts_cf_datepicker").on("focus",function(){modal.isActive()?modal.hide():modal.show()});var $dp_start=$("#ts_dp_start"),$dp_end=$("#ts_dp_end"),start_date=UIkit.datepicker($dp_start,{format:"MMM D, YYYY"}),end_date=UIkit.datepicker($dp_end,{format:"MMM D, YYYY"});$dp_start.on("change",function(){end_date.options.minDate=$dp_start.val()}),$dp_end.on("change",function(){start_date.options.maxDate=$dp_end.val()}),$("#daterangeApply").on("click",function(e){e.preventDefault(),modal.hide(),$(".ts_cf_datepicker").val($dp_start.val()+" - "+$dp_end.val()).change().blur()}),$("button.ts_cf_reset").on("click",function(){cf_selectize.clear(),slider.reset()})}})}]);