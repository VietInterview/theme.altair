angular.module("altairApp").controller("treeCtrl",["$rootScope","$scope","$timeout",function($rootScope,$scope,$timeout){$timeout(function(){$("#tA").fancytree({checkbox:!0,selectMode:1,imagePath:"assets/icons/others/",extensions:["dnd","wide"],autoScroll:!0,activate:function(event,data){var node=data.node;node.data.href&&window.open(node.data.href,node.data.target)}}),$("#tB").fancytree({checkbox:!0,selectMode:3,imagePath:"assets/icons/others/",extensions:["dnd","wide"],autoScroll:!0,activate:function(event,data){var node=data.node;node.data.href&&window.open(node.data.href,node.data.target)}});var $tFilter=$("#tFilter");$tFilter.fancytree({extensions:["filter"],quicksearch:!0,source:{url:"data/fancytree/ajax-tree-local.json"},filter:{autoApply:!0,counter:!0,fuzzy:!1,hideExpandedCounter:!0,highlight:!0,mode:"dimm"},activate:function(event,data){},lazyLoad:function(event,data){data.result={url:"data/fancytree/ajax-sub2.json"}}});var tree=$tFilter.fancytree("getTree");$("#filter_input").keyup(function(e){var n,opts={autoExpand:$("#autoExpand").is(":checked"),leavesOnly:$("#leavesOnly").is(":checked")},match=$(this).val();return e&&e.which===$.ui.keyCode.ESCAPE||""===$.trim(match)?void $("#tree_filter_reset").click():(n=$("#tree_filter_regex").is(":checked")?tree.filterNodes(function(node){return new RegExp(match,"i").test(node.title)},opts):tree.filterNodes(match,opts),void $("#tree_filter_reset").attr("disabled",!1))}),$scope.resetFilters=function($event){$scope.tree.filterInput="",tree.clearFilter()},$("#filter_switches").find("input:checkbox").on("ifChanged",function(e){var id=$(this).attr("id"),flag=$(this).is(":checked");switch(id){case"autoExpand":case"regex":case"leavesOnly":break;case"hideMode":tree.options.filter.mode=flag?"hide":"dimm";break;case"counter":case"fuzzy":case"hideExpandedCounter":case"highlight":tree.options.filter[id]=flag}tree.clearFilter(),$("#filter_input").keyup()}),$scope.tree={counter:!0,hideExpandedCounter:!0,highlight:!0}})}]);