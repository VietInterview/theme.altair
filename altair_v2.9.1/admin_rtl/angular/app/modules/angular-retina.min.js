!function(angular,undefined){"use strict";var infix="@2x",data_url_regex=/^data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/,ngRetina=angular.module("ngRetina",[]).config(["$provide",function($provide){$provide.decorator("ngSrcDirective",["$delegate",function($delegate){return $delegate[0].compile=function(element,attrs){},$delegate}])}]);ngRetina.provider("ngRetina",function(){this.setInfix=function(value){infix=value},this.$get=angular.noop}),ngRetina.directive("ngSrc",["$window","$http",function($window,$http){function getHighResolutionURL(url){var parts=url.split(".");return parts.length<2?url:(parts[parts.length-2]+=infix,parts.join("."))}var msie=parseInt((/msie (\d+)/.exec($window.navigator.userAgent.toLowerCase())||[])[1],10),isRetina=function(){var mediaQuery="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return $window.devicePixelRatio>1||$window.matchMedia&&$window.matchMedia(mediaQuery).matches}();return function(scope,element,attrs){function setImgSrc(img_url){attrs.$set("src",img_url),msie&&element.prop("src",img_url)}function set2xVariant(img_url){var img_url_2x=null;img_url_2x=angular.isUndefined(attrs.at2x)?$window.sessionStorage.getItem(img_url):attrs.at2x,img_url_2x?setImgSrc(img_url_2x):(img_url_2x=getHighResolutionURL(img_url),$http.head(img_url_2x).success(function(data,status){setImgSrc(img_url_2x),$window.sessionStorage.setItem(img_url,img_url_2x)}).error(function(data,status,headers,config){setImgSrc(img_url),$window.sessionStorage.setItem(img_url,img_url)}))}attrs.$observe("ngSrc",function(value){value&&(isRetina&&angular.isUndefined(attrs.noretina)&&"object"==typeof $window.sessionStorage&&"IMG"===element[0].tagName&&!value.match(data_url_regex)?set2xVariant(value):setImgSrc(value))})}}])}(window.angular);